<div class="index-container" style="max-width: 600px; margin: 0 auto; padding: 20px; font-family: sans-serif; background-color: #D3D3D3; min-height: 100vh;">
  <h1 style="text-align: center; color: #333; margin-bottom: 20px;">みんなの予想</h1>

  <% if notice %>
    <div style="background-color: #d4edda; color: #155724; padding: 10px; border-radius: 8px; margin-bottom: 20px; text-align: center;">
      <%= notice %>
    </div>
  <% end %>

  <div class="prediction-history">
    <% @predictions.reverse_each do |prediction| %>
      <div class="prediction-card" style="background: white; border-radius: 10px; padding: 15px; margin-bottom: 15px; border: 2px solid #999;">
        
        <%# --- 名前と削除ボタン --- %>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 5px;">
          <span style="font-size: 18px; font-weight: bold; color: #333;">
            <%= prediction.name.presence || "無名の予想" %>
          </span>
          
          <%= button_to "×", prediction_path(prediction), 
              method: :delete, 
              data: { turbo_confirm: "本当に消しちゃうよ？" }, 
              style: "background: #ff4d4d; color: white; border: none; border-radius: 4px; width: 28px; height: 28px; cursor: pointer; font-weight: bold; font-size: 16px; display: flex; align-items: center; justify-content: center;" %>
        </div>
        
        <%# --- 6個で折り返す丸の並び --- %>
        <div style="display: flex; flex-wrap: wrap; gap: 8px; justify-content: flex-start;">
          <% prediction.ranking_items.order(:rank).each do |item| %>
            <div style="text-align: center; width: calc(100% / 6 - 8px); min-width: 45px; margin-bottom: 10px;">
              <div style="
                width: 100%;
                aspect-ratio: 1/1;
                border-radius: 50%;
                background-color: <%= item.color_code %>;
                border: 1px solid #ccc;
                margin-bottom: 3px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
              "></div>
              <span style="font-size: 10px; color: #888; font-weight: bold;"><%= item.rank %></span>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

  <div style="text-align: center; margin-top: 30px; padding-bottom: 50px;">
    <%= link_to "新しく予想する", "/predictions/new", style: "background-color: #fff; color: #000; text-decoration: none; padding: 12px 24px; border: 2px solid #000; font-weight: bold; box-shadow: 4px 4px 0 #000; display: inline-block;" %>
  </div>
</div>